{% extends "base.html" %}
{% block content %}

{% if validlink %}
  <div class="form-container">
    <h2>Восстановление пароля</h2>
    <div class="password-hint" style="font-size:14px; color:#555; line-height:1.5;">
      <strong>Требования к паролю:</strong>
      <ul style="margin:8px 0 0 18px;">
        <li>минимум <b>8</b> символов;</li>
        <li>не похож на ваши имя, логин или e-mail;</li>
        <li>не является распространённым паролем;</li>
        <li>не состоит только из цифр.</li>
      </ul>
      <div style="margin-top:6px;">
        <em>Совет:</em> для надёжности используйте буквы в разном регистре, цифры и символы.
      </div>
    </div>
    <form method="post">
      {% csrf_token %}

      {# Общие ошибки формы #}
      {% if form.non_field_errors %}
        <div class="alert alert-danger">
          {{ form.non_field_errors }}
        </div>
      {% endif %}

      <div>
        <label for="id_new_password1">Новый пароль</label>
        {{ form.new_password1 }}
        {% if form.new_password1.errors %}
          <div class="text-danger">{{ form.new_password1.errors }}</div>
        {% endif %}
      </div>

      <div>
        <label for="id_new_password2">Повторите пароль</label>
        {{ form.new_password2 }}
        {% if form.new_password2.errors %}
          <div class="text-danger">{{ form.new_password2.errors }}</div>
        {% endif %}
      </div>

      <button type="submit">Сохранить</button>
    </form>
  </div>
{% else %}
  <p>Ссылка недействительна или устарела. Запроси сброс ещё раз.</p>
{% endif %}
{% endblock %}
